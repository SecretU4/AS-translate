
;-------------------------------------------------
;施設　病院
;-------------------------------------------------
@CITY_F_3(ARG:0,ARG:1)
#DIM L_INPUT
#DIM L_M
#DIM L_I
#DIM L_MONEY
L_MONEY = 0
CLEARLINE LINECOUNT
DRAWLINE
PRINTFORML 【病院】　所持金:{MONEY}
DRAWLINE
PRINTFORML 病や中毒になった住民を治療します、治療費は住民に依存します。
DRAWLINE
PRINTFORML 【中毒の治療】
PRINTFORML [100] 快楽中毒
PRINTFORML 
PRINTFORML [999] 戻る
INPUT
L_INPUT = RESULT
L_M = RESULT
SELECTCASE L_INPUT
	CASE 999
		RETURN
	CASE 100
		CLEARLINE LINECOUNT
		DRAWLINE
		PRINTFORML 治療する
		DRAWLINE
		CALL RPG_LIST_CHARA
		L_INPUT = RESULT
		L_I = RESULT
		IF L_INPUT == 1000
			RESTART
		ELSEIF L_INPUT == 0
			PRINTFORMW あなたは選択できません
			RESTART
		ELSEIF !INRANGE(L_INPUT, 1, CHARANUM - 1)
			PRINTFORMW 入力された番号はキャラの範囲外です。
			RESTART
		ELSEIF TALENT:L_INPUT:NPC == 999
			PRINTFORMW NPCは選択できません
			RESTART
		ENDIF
		IF TALENT:L_I:快楽中毒 == 1
			L_MONEY = (EXP:L_I:売春経験*10)+2000
			SIF L_MONEY >= 100000
				L_MONEY = 100000
		ELSE
			PRINTFORMW %CALLNAME:L_I%は治療する必要がありません。
			RESTART
		ENDIF
		CLEARLINE LINECOUNT
		DRAWLINE
		PRINTFORML 治療費は￥{L_MONEY}です、治療いたしますか？
		DRAWLINE
		PRINTFORML [0] はい
		PRINTFORML [1] いいえ
		PRINTFORML 
		INPUT
		L_INPUT = RESULT
		SELECTCASE L_INPUT
		CASE 0
			IF MONEY <= L_MONEY
				PRINTFORML 治療費が不足しています。
				RESTART
			ENDIF
			TALENT:L_I:快楽中毒 = 0
			PRINTFORMW %CALLNAME:L_I%を治療しました。
		CASE 1
			RESTART
		ENDSELECT
ENDSELECT
RESTART










