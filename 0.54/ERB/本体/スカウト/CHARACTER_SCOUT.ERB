;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
;
;	Module		:CHARACTER_SCOUT.ERB
;	Facility	:データベース(EXPUP)。
;
;	Licence		:ライセンスフリー。
;
;	Modification Data:
;
;	Edit	Date			Author					Reason
;	001		20XX/XX/XX		----					新規作成
;
;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#

;===============================================================================
;  ◇記載関数一覧(記載順)
;
;		Module Name						Explanation
;
;	・ CHARACTER_SCOUT_POS						DB:EXPUP位置
;
;===============================================================================

;=================================================
;   sub CHARACTER_SCOUT_POS
;=================================================
;   DB:EXPUP位置
;-------------------------------------------------
; Input:
;  ARGS					対象値
; Output:
;  RETURNF				位置
;-------------------------------------------------
@CHARACTER_SCOUT1(ARG:0)
#DIM S_LOOP
#DIM S_RACE
#DIM S_MEMBER
#DIM L_I
#DIMS S_NAME
ADDCHARA 1



CALL CHARACTER_SCOUT2
 


;-------------------------------------------------
; 名前　性格　素質　経験　設定
;ランダムキャラならば追加したあと必ず使うこと
;-------------------------------------------------
@CHARACTER_SCOUT2(ARG:0)
#DIM L_I
#DIM S_MIND
#DIM S_RACE
L_I = CHARANUM -1

;IF RAND:10 <= 7
;性別を選びます
;ELSE
;		TALENT:L_I:オトコ = 1
;ENDIF

ARG:0 = L_I

IF TALENT:L_I:オトコ == 0
;名前を設定します
	IF RAND:100 > 80
		CALL RANDOM_N_LADY(ARG:0)
	ELSE
		CALL RANDOM_N_LADY1(ARG:0)
	ENDIF
ELSE
CALL RANDOM_N_MAN(ARG:0)
ENDIF


IF Flag:依頼_依頼開始 == 1
	S_RACE = RAND:((Flag:依頼_依頼Lv/5)+1)
	SIF S_RACE >= 10
		S_RACE = 10
ELSEIF Flag:EP成否 == 1
	S_RACE = RAND:((Flag:EP敵戦力/30)+1)
	SIF S_RACE >= 10
		S_RACE = 10
ELSEIF Flag:調査イベント番号 > 0
	S_RACE = RAND:11
	SIF S_RACE >= 10
		S_RACE = 10
ELSE
	IF RAND:100  >= 85 && FLAG:都市_Lv >= 25 && FLAG:時間帯 == 1
		S_RACE = 12
	ELSEIF RAND:300  >= 295
		S_RACE = 11
	ELSEIF RAND:100  >= 95
		S_RACE = 8
	ELSEIF !RAND:6 && FLAG:都市_Lv >= 50
		S_RACE = 6
	ELSEIF !RAND:6 && FLAG:病院 >= 20
		S_RACE = 5
	ELSEIF !RAND:5 && FLAG:研究施設 >= 20
		S_RACE = 4
		SIF Flag:喫茶店スカウト != 0
			TALENT:L_I:機械 = 1
	ELSEIF !RAND:4 && FLAG:品種改良施設 >= 5 && FLAG:支援住宅 >= 5
		S_RACE = 3
	ELSEIF !RAND:3 && FLAG:ラブホテル >= 5 && FLAG:高級カジノ >= 5 && FLAG:ゲームセンター >= 5
		S_RACE = 2
	ELSEIF !RAND:2 && FLAG:希少種保護施設 >= 5 && FLAG:学園 >= 5
		S_RACE = 1
	ELSE
		S_RACE = 0
	ENDIF
ENDIF



IF FLAG:遺研_研究中 != 0
	TALENT:L_I:イレギュラー = 1
	TALENT:L_I:弱み = 1
	TALENT:L_I:ボランティア = 1
ELSEIF Flag:依頼_スパイテロ駆除 == 1
	TALENT:L_I:イレギュラー = 1
	TALENT:L_I:弱み = 1
ELSEIF Flag:EP成否 == 1
	TALENT:L_I:主人持ち = 1
	TALENT:L_I:弱み = 1
	Talent:L_I:非処女 = 1
	TCVAR:L_I:履歴_EXP_処女喪失 = 1
	Talent:L_I:Ａ非処女 = 1
	TCVAR:L_I:履歴_EXP_Ａ処女喪失 = 1
	EXP:L_I:Ｖ経験 = (RAND:200)+100
	EXP:L_I:Ａ経験 = (RAND:200)+100
	EXP:L_I:性交経験 = (RAND:300)+150
	EXP:L_I:強姦経験 = (RAND:300)+150
	EXP:L_I:フェラ経験 = (RAND:100)+50
	EXP:L_I:パイズリ経験 = (RAND:100)+50
	CSTR:L_I:初えっち相手名 = 他「プレイヤー」
	CSTR:L_I:初キス相手名 = 他「プレイヤー」
	CSTR:L_I:初精飲相手名 = 他「プレイヤー」
	CSTR:L_I:初フェラ相手名 = 他「プレイヤー」
	CSTR:L_I:初Ａえっち相手名 = 他「プレイヤー」
	CSTR:L_I:初絶頂相手名 = 他「プレイヤー」
	CSTR:L_I:初中出し相手名 = 他「プレイヤー」
	CSTR:L_I:初出産相手名 = 他「プレイヤー」
ENDIF




IF Flag:調査イベント番号 == 401
	TALENT:L_I:元性奴隷 = 1
	Talent:L_I:非処女 = 1
	TCVAR:L_I:履歴_EXP_処女喪失 = 1
	Talent:L_I:Ａ非処女 = 1
	TCVAR:L_I:履歴_EXP_Ａ処女喪失 = 1
	EXP:L_I:Ｖ経験 = (RAND:200)+50
	EXP:L_I:Ａ経験 = (RAND:200)+50
	EXP:L_I:性交経験 = (RAND:300)+50
	EXP:L_I:強姦経験 = (RAND:300)+50
	EXP:L_I:出産経験 = (RAND:3)+1
	EXP:L_I:フェラ経験 = (RAND:100)+50
	EXP:L_I:パイズリ経験 = (RAND:100)+50
	CSTR:L_I:初えっち相手名 = 不明
	CSTR:L_I:初キス相手名 = 不明
	CSTR:L_I:初精飲相手名 = 不明
	CSTR:L_I:初フェラ相手名 = 不明
	CSTR:L_I:初Ａえっち相手名 = 不明
	CSTR:L_I:初絶頂相手名 = 不明
	CSTR:L_I:初中出し相手名 = 不明
	CSTR:L_I:初出産相手名 = 不明
ELSEIF Flag:調査イベント番号 == 400
	TALENT:L_I:旧世代人 = 1
ENDIF





;S_RACE = 12


CFLAG:L_I:住人_種族 = S_RACE
;種族の設定



SIF Flag:調査イベント番号 == 500
	CFLAG:L_I:住人_種族 = 9
SIF Flag:調査イベント番号 == 501
	CFLAG:L_I:住人_種族 = 10
SIF Flag:依頼_イスからの駆除依頼 == 1
	CFLAG:L_I:住人_種族 = 7
SIF Flag:掘り出しもの品質 == 10
	CFLAG:L_I:住人_種族 = 13

IF FLAG:継承種族 != 0
	CFLAG:L_I:住人_種族 = (FLAG:継承種族)-1
ENDIF

IF (Flag:カフェ絞り込み_種族 != 0) && (Flag:喫茶店スカウト != 0)
	TALENT:L_I:機械 = 0
	CFLAG:L_I:住人_種族 = (Flag:カフェ絞り込み_種族)-1
	SIF Flag:カフェ絞り込み_種族 == 5
		TALENT:L_I:機械 = 1
ENDIF


S_MIND = RAND:10
;性格の設定4

CALL CHARACTER_SCOUT_MIND(ARG:0)
;性格と口調の設定

CALL Random_Chara_Set(ARG:0)
;素質の設定


CALL CHARACTER_SCOUT_PERSONAL2(ARG:0)
;住人情報の設定

CALL CHARACTER_SCOUT_EXTRA(ARG:0)
;悩みの設定
SIF CALLNAME:L_I == ""
	CALLNAME:L_I = %NAME:L_I%

MAXBASE:L_I:体力 = 200
BASE:L_I:体力 = MAXBASE:L_I:体力
MAXBASE:L_I:絶頂 = FLAG:最大値_絶頂
MAXBASE:L_I:ムード = FLAG:最大数_ムード

CFLAG:L_I:使用口上 = NO:L_I
CFLAG:L_I:危険日 = RAND:6

FLAG:個別番号カウント += 1
CFLAG:L_I:個別番号 = FLAG:個別番号カウント

CALL CHARACTER_SCOUT_PROFILE(ARG:0)
;初期プロフィール

CALL CHARACTER_SCOUT_RPG(ARG:0)
;RPG


CALL CHARACTER_SCOUT_COSTUME(ARG:0)
;種族特徴





;キャラ物色中にキャンセルしても番号が進むのが気になるので
;キャンセル用の関数
@CANCEL_SCOUT(L_C_ID)
#DIM L_C_ID
FLAG:個別番号カウント --
DELCHARA L_C_ID











