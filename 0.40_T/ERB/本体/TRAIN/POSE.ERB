;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
;
;	Module		:POSE.ERB
;	Facility	:POSE関連処理。
;				 姿勢制御関連の処理を纏める。
;
;	Licence		:ライセンスフリー。
;
;	Modification Data:
;
;	Edit	Date			Author					Reason
;	001		20XX/XX/XX		----					新規作成
;
;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#

;===============================================================================
;  ◇記載関数一覧(記載順)
;
;		Module Name						Explanation
;
; *- POSE関連
;
;	・ POSE_CLEAR						POSE:初期化
;	・ POSE_SET							POSE:設定
;	・ POSE_RESET						POSE:リセット
;
;===============================================================================

;-------------------------------------------------------------------------------
;   POSE関連
;-------------------------------------------------------------------------------

;=================================================
;   sub POSE_CLEAR
;=================================================
;   POSE:初期化
;-------------------------------------------------
; Input:
;  ARG					対象キャラ
;-------------------------------------------------
@POSE_CLEAR(ARG)
#DIM L_P

L_P = ARG

TEQUIP:L_P:ペニス占有者１	= [[ペニス占有者:無し]]
TEQUIP:L_P:ペニス占有者２	= [[ペニス占有者:無し]]
TEQUIP:L_P:ペニス占有部位１	= [[占有部位:無し]]
TEQUIP:L_P:ペニス占有部位２	= [[占有部位:無し]]


;=================================================
;   sub POSE_SET
;=================================================
;   POSE:設定
;-------------------------------------------------
; Input:
;  ARG:0				対象キャラ
;  ARG:1				占有部位
;  ARG:2				占有連番
;  ARG:3				実行キャラ
;-------------------------------------------------
@POSE_SET(ARG:0, ARG:1, ARG:2=1, ARG:3=-1)
#DIM L_P
#DIM L_T
#DIMS L_KEY

L_P = (ARG:3 == -1) ? PLAYER # ARG:3
L_T = ARG:0
IF ARG:2 == 1
	L_KEY = １
ELSE
	L_KEY = ２
ENDIF

;- SET
TEQUIP:L_P:@"ペニス占有者%L_KEY%"		= L_T
TEQUIP:L_P:@"ペニス占有部位%L_KEY%"		= ARG:1


;=================================================
;   sub POSE_RESET
;=================================================
;   POSE:リセット
;-------------------------------------------------
; Input:
;  ARGS					モード("Ｖ", "Ａ", "Ｐ")
;-------------------------------------------------
@POSE_RESET(ARGS)
#DIM L_I
#DIM L_T

;- 全体調整
FOR L_I, 0, DEFTR_PL_NUM
	L_T = GTR_PL:L_I
	SIF L_T < 0
		BREAK

	SELECTCASE ARGS
		CASE "Ｖ"
			;- 性交中のキャラはリセット
			TEQUIP:L_T:ポイント性交 = [[TRAIN:無し]]
			SIF (TFLAG:メインターゲット == L_T)
				TEQUIP:L_T:Ｖ器具 = 0
		CASE "Ａ"
			;- 性交中のキャラはリセット
			TEQUIP:L_T:ポイント性交 = [[TRAIN:無し]]
			SIF (TFLAG:メインターゲット == L_T)
				TEQUIP:L_T:Ａ器具 = 0
		CASE "Ｐ"
			;- 性交中のキャラはリセット
			TEQUIP:L_T:ポイント性交 = [[TRAIN:無し]]
		;上記以外
		CASEELSE
			BREAK
	ENDSELECT

NEXT


