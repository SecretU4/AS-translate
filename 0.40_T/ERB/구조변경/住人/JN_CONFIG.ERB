
;-------------------------------------------------
; 住人設定
;-------------------------------------------------
@JN_CONFIG
#DIM L_INPUT

$INPUT_LOOP2
CLEARLINE LINECOUNT

DRAWLINE
PRINTFORML 변경할 항목을 선택하세요。
PRINTFORML [0] - てすと
PRINTFORML [1] - 레귤러 설정(일부 이벤트 발생)
PRINTFORML [2] - 특별 보호 설정(피해 보호)
PRINTFORML [3] - 각 거주자 이벤트 경향
PRINTFORML [4] - 교류 대상
PRINTFORML [5] - 의상 변경
PRINTFORML [6] - 직위 변경
PRINTFORML
PRINTFORML [50] - 이름 변경
PRINTFORML
PRINTFORML
PRINTFORML [100] - 주민 말소
PRINTFORML 
PRINTFORML [999] - 돌아온다

$INPUT_LOOP
INPUT
L_INPUT = RESULT

SELECTCASE L_INPUT
CASE 0
	CALL MANAGE_CHARA_SELECT("MNG_레귤러指定")
CASE 1
	CALL JN_CONFIG_REGULAR
CASE 2
	CALL JN_CONFIG_T_BLOCK
CASE 3
	CALL JN_CONFIG_EVENT
CASE 4
	CALL JN_CONFIG_COM
CASE 5
	CALL COSTUME_MAIN
CASE 6
	CALL POSITION_CHANGE
CASE 50
	CALL JN_CONFIG_N_C
CASE 100
	CALL JN_CONFIG_DELETE
CASE 999
	RETURN
CASEELSE
	GOTO INPUT_LOOP
ENDSELECT

RESTART




;-------------------------------------------------
; 레귤러設定
;-------------------------------------------------
@JN_CONFIG_REGULAR(ARG:0,ARG:1,ARGS:0)
#DIM L_INPUT
#DIM L_INPUT2
#DIM L_I
#DIM L_REGULAR
$DATA_LIST
L_INPUT = 0
L_INPUT2 = 0
L_REGULAR = 0
L_I = 0

DRAWLINE
PRINTFORML 레귤러 설정을 변경할 주민을 선택하세요(레귤러는 최대 20명까지)
DRAWLINE
SETCOLOR 0,250,250
PRINTFORM 【레귤러:
ARG:0 = 531
ARG:1 = 1
CALL MEMBER_LIST2(ARG:0,ARG:1)
L_REGULAR = FLAG:汎用変数
PRINTFORML 】
RESETCOLOR


FOR L_I,0,CHARANUM
	CSTR:L_I:4999 '= \@(CFlag:L_I:레귤러) ? o # x\@ + " "
NEXT
ARGS:0 = 레귤러
CALL LIST_CHARA(ARGS:0,,,4999)

L_INPUT = RESULT

IF L_INPUT != 1000
	IF TALENT:L_INPUT:NPC == 999 
		PRINTFORMW NPC는 선택할 수 없습니다
		GOTO DATA_LIST
	ELSEIF L_INPUT == 0
		PRINTFORMW 아나타는 선택할 수 없습니다
		GOTO DATA_LIST
	ELSEIF L_REGULAR >= 20 && CFlag:L_INPUT:레귤러 == 0
		PRINTFORMW 레귤러는 최대 20명 입니다
		GOTO DATA_LIST
	ELSEIF CFlag:L_INPUT:레귤러 == 0
		CFlag:L_INPUT:레귤러 = 1
		PRINTFORMW %CALLNAME:L_INPUT%を 레귤러에 넣었습니다
		GOTO DATA_LIST
	ELSEIF CFlag:L_INPUT:레귤러 == 1
		CFlag:L_INPUT:레귤러 = 0
		PRINTFORMW %CALLNAME:L_INPUT%を 레귤러에서 제외했습니다
		GOTO DATA_LIST
	ENDIF
ENDIF

; CALL JN_CONFIG



;-------------------------------------------------
; 특별보호設定
;-------------------------------------------------
@JN_CONFIG_T_BLOCK(ARG:0,ARG:1,ARGS:0)
#DIM L_INPUT
#DIM L_INPUT2
#DIM L_I
#DIM L_REGULAR
$DATA_LIST
L_INPUT = 0
L_INPUT2 = 0
L_REGULAR = 0
L_I = 0

DRAWLINE
PRINTFORML 특별 보호 설정을 변경할 거주자를 선택하세요(특별 보호는 최대 30명까지)
PRINTFORML 특별 보호된 거주자는 불이익・피해를 입히는 이벤트가 발생하지 않습니다。
DRAWLINE
SETCOLOR 0,250,250
PRINTFORM 【보호 처리:
ARG:0 = 532
ARG:1 = 1
CALL MEMBER_LIST2(ARG:0,ARG:1)
L_REGULAR = FLAG:汎用変数
PRINTFORML 】
RESETCOLOR
DRAWLINE




FOR L_I,0,CHARANUM
	CSTR:L_I:4999 '= \@(CFlag:L_I:특별보호) ? o # x\@ + " "
NEXT
ARGS:0 = 특별보호
CALL LIST_CHARA(ARGS:0,,,4999)

L_INPUT = RESULT

IF L_INPUT != 1000
	IF TALENT:L_INPUT:NPC == 999 
		PRINTFORMW NPC는 선택할 수 없습니다
		GOTO DATA_LIST
	ELSEIF L_INPUT == 0
		PRINTFORMW 아나타는 선택할 수 없습니다
		GOTO DATA_LIST
	ELSEIF L_REGULAR >= 30&& CFlag:L_INPUT:특별보호 == 0
		PRINTFORMW 특별 보호는 30명까지입니다
		GOTO DATA_LIST
	ELSEIF CFlag:L_INPUT:특별보호 == 0
		CFlag:L_INPUT:특별보호 = 1
		PRINTFORMW %CALLNAME:L_INPUT%を 특별 보호 대상에 넣었습니다
		GOTO DATA_LIST
	ELSEIF CFlag:L_INPUT:특별보호 == 1
		CFlag:L_INPUT:특별보호 = 0
		PRINTFORMW %CALLNAME:L_INPUT%を 특별 보호 대상에서 제외했습니다
		GOTO DATA_LIST
	ENDIF
ENDIF

; CALL JN_CONFIG




;-------------------------------------------------
; 各住人イベント傾向
;-------------------------------------------------
@JN_CONFIG_EVENT
#DIM L_I
#DIM L_INPUT
$DATA_LIST

L_I = 0

DRAWLINE
PRINTFORML 변경할 캐릭터를 선택하세요
DRAWLINE




CALL LIST_CHARA

L_INPUT = RESULT
IF L_INPUT != 1000
	IF TALENT:L_INPUT:NPC == 999 
		PRINTFORMW NPC는 선택할 수 없습니다
		GOTO DATA_LIST
	ELSEIF L_INPUT == 0
		PRINTFORMW 아나타는 선택할 수 없습니다
		GOTO DATA_LIST
	ENDIF
	L_I = L_INPUT
	$INPUT_LOOP2
	CLEARLINE LINECOUNT
	DRAWLINE
	PRINTFORML  {L_I} %CALLNAME:L_I% 변경하고 싶은 이벤트 경향을 선택하세요。
	DRAWLINE
	PRINTFORM [0] 교류 이벤트(
	IF  CFlag:L_I:住人イベント傾向_交流 == 90
		PRINTFORM 많음
	ELSEIF CFlag:L_I:住人イベント傾向_交流 == 60
		PRINTFORM 보통
	ELSEIF CFlag:L_I:住人イベント傾向_交流 == 30
		PRINTFORM 적음
	ELSE
		PRINTFORM 발생하지 않음
	ENDIF
	PRINTFORML )
	PRINTFORM [1] 연애 이벤트(
	IF  CFlag:L_I:住人イベント傾向_恋愛 == 90
		PRINTFORM 많음
	ELSEIF CFlag:L_I:住人イベント傾向_恋愛 == 60
		PRINTFORM 보통
	ELSEIF CFlag:L_I:住人イベント傾向_恋愛 == 30
		PRINTFORM 적음
	ELSE
		PRINTFORM 발생하지 않음
	ENDIF
	PRINTFORML )
	PRINTFORM [2] 범죄 이벤트(
	IF  CFlag:L_I:住人イベント傾向_犯罪 == 90
		PRINTFORM 많음
	ELSEIF CFlag:L_I:住人イベント傾向_犯罪 == 60
		PRINTFORM 보통
	ELSEIF CFlag:L_I:住人イベント傾向_犯罪 == 30
		PRINTFORM 적음
	ELSE
		PRINTFORM 발생하지 않음
	ENDIF
	PRINTFORML )
	PRINTFORM [3] 성적인 이벤트(
	IF  CFlag:L_I:住人イベント傾向_性 == 90
		PRINTFORM 많음
	ELSEIF CFlag:L_I:住人イベント傾向_性 == 60
		PRINTFORM 보통
	ELSEIF CFlag:L_I:住人イベント傾向_性 == 30
		PRINTFORM 적음
	ELSE
		PRINTFORM 발생하지 않음
	ENDIF
	PRINTFORML )
	PRINTFORM [10] 주민 교류 상한(
	IF  CFlag:L_I:住人交流設定 == 4
		PRINTFORM 상한 없음
	ELSEIF CFlag:L_I:住人交流設定 == 3
		PRINTFORM 연인
	ELSEIF CFlag:L_I:住人交流設定 == 2
		PRINTFORM 베프
	ELSEIF CFlag:L_I:住人交流設定 == 1
		PRINTFORM 친구
	ELSE
		PRINTFORM 발생하지 않음
	ENDIF
	PRINTFORML )
	PRINTFORML 
	PRINTFORML [999] 돌아온다
	PRINTFORMLC \@(L_I > 1) ? [1001]이전 캐릭터 # %" " * 16%\@
	PRINTFORMLC   %" " * 18%
	PRINTFORMLC \@(L_I < CHARANUM-1) ? [1003]다음 캐릭터 # %" " * 16%\@
	$INPUT_LOOP
	INPUT
	L_INPUT = RESULT


	SELECTCASE L_INPUT
	CASE 999
	CASE 10
		CFlag:L_I:(3950+L_INPUT) += 1
		SIF CFlag:L_I:(3950+L_INPUT) >= 5
			CFlag:L_I:(3950+L_INPUT) = 0
		GOTO INPUT_LOOP2
	CASE 1001
		IF (L_I > 1) 
			L_I --
			GOTO INPUT_LOOP2
		ENDIF
		GOTO INPUT_LOOP
	CASE 1003
		IF (L_I < CHARANUM-1) 
			L_I ++
			GOTO INPUT_LOOP2
		ENDIF
		GOTO INPUT_LOOP
	CASE L_INPUT
		CFlag:L_I:(3950+L_INPUT) += 30
		SIF CFlag:L_I:(3950+L_INPUT) >= 100
			CFlag:L_I:(3950+L_INPUT) = 0
		GOTO INPUT_LOOP2
	CASEELSE
		GOTO INPUT_LOOP
	ENDSELECT
ENDIF




;-------------------------------------------------
; デリート
;-------------------------------------------------
@JN_CONFIG_DELETE
#DIM L_I
#DIM L_INPUT
$DATA_LIST

L_I = 0

DRAWLINE
PRINTFORML 삭제할 캐릭터를 선택하세요
DRAWLINE




CALL LIST_CHARA

L_INPUT = RESULT
IF L_INPUT != 1000
	IF TALENT:L_INPUT:NPC == 999 
		PRINTFORMW NPC는 선택할 수 없습니다
		GOTO DATA_LIST
	ELSEIF L_INPUT == 0
		PRINTFORMW 아나타는 선택할 수 없습니다
		GOTO DATA_LIST
	ENDIF
	L_I = L_INPUT
	PRINTFORML %CALLNAME:L_I%を 삭제합니다、정말 괜찮습니까？
	PRINTFORML [0] 네
	PRINTFORML [999] 돌아온다
	$INPUT_LOOP
	INPUT
	L_INPUT = RESULT
	SELECTCASE L_INPUT
	CASE 999
	CASE 0
	PRINTFORML 
	PRINTFORMW %CALLNAME:L_I%を 삭제했습니다
	DELCHARA  L_I
	CASEELSE
		GOTO INPUT_LOOP
	ENDSELECT
ENDIF









; CALL JN_CONFIG

;-------------------------------------------------
; 各交流住人
;-------------------------------------------------
@JN_CONFIG_COM
#DIM L_NPC
#DIM L_INPUT
#DIM L_T
#DIM L_NAME

L_T = TARGET
$COM_LIST

DRAWLINE
PRINTFORML 참조할 캐릭터를 선택하세요
DRAWLINE
CALL LIST_CHARA
TARGET = RESULT

SIF RESULT == 1000
	RETURN

IF TALENT:RESULT:NPC == 999 
	PRINTFORMW NPC는 선택할 수 없습니다
	GOTO COM_LIST
ELSEIF RESULT == 0
	PRINTFORMW 아나타는 선택할 수 없습니다
	GOTO COM_LIST
ENDIF


$INPUT_LOOP0
CLEARLINE LINECOUNT
DRAWLINE
PRINTFORML  {TARGET} %CALLNAME:TARGET%
PRINTFORML 교류 대상의 즐겨찾기、이름 변경을 할 수 있습니다。
DRAWLINE
L_NPC = 0
PRINTFORML [-1] 즐겨찾기 해제
$INPUT_LOOP
IF CSTR:(3000+L_NPC) == ""
	PRINTFORML 【미등록】
ELSE
SIF CFLAG:3600 == L_NPC
	SETCOLOR 50,250,250
	PRINTFORM [{L_NPC}] %CSTR:(3000+L_NPC), 18 ,LEFT%
	PRINTFORM 【
	IF CFLAG:(3030+L_NPC) == 1
		PRINTFORM 남
	ELSE
		PRINTFORM 녀
	ENDIF
	PRINTFORM 】【관계:
	IF CFLAG:(3020+L_NPC) == 5
		PRINTFORM 부부
	ELSEIF CFLAG:(3020+L_NPC) == 4
		PRINTFORM 연인
	ELSEIF CFLAG:(3020+L_NPC) == 3
		PRINTFORM 베프
	ELSEIF CFLAG:(3020+L_NPC) == 2
		PRINTFORM 친구
	ELSEIF CFLAG:(3020+L_NPC) == 1
		PRINTFORM 지인
	ELSEIF CFLAG:(3020+L_NPC) == -5
		PRINTFORM 애인
	ENDIF
	PRINTFORM 】【호감도:{CFLAG:(3010+L_NPC), 3 ,LEFT}】【상성:{CFLAG:(3050+L_NPC), 3 ,LEFT}】【성행위 횟수:{CFLAG:(3060+L_NPC)}】
	PRINTFORML
ENDIF
RESETCOLOR
L_NPC += 1
SIF L_NPC < 10
	GOTO INPUT_LOOP
DRAWLINE
PRINTFORML
PRINTFORML 
PRINTFORML [999] 돌아온다
PRINTFORMLC \@(TARGET > 1) ? [1001]이전 캐릭터 # %" " * 16%\@
PRINTFORMLC   %" " * 18%
PRINTFORMLC \@(TARGET < CHARANUM-1) ? [1003]다음 캐릭터 # %" " * 16%\@
$INPUT_LOOP2
INPUT
L_INPUT = RESULT
SELECTCASE L_INPUT
CASE -1
	CFLAG:3600 = -1
	PRINTFORMW 【즐겨찾기를 해제했습니다】
	GOTO INPUT_LOOP0
CASE 999
	TARGET = L_T
	; CALL JN_CONFIG
	RETURN
CASE 1001
	IF (TARGET > 1) 
		TARGET --
		GOTO INPUT_LOOP0
	ENDIF
	GOTO INPUT_LOOP2
CASE 1003
	IF (TARGET < CHARANUM-1) 
		TARGET ++
		GOTO INPUT_LOOP0
	ENDIF
	GOTO INPUT_LOOP2
CASEELSE
	CFLAG:3600 = RESULT
	PRINTFORML 【%CSTR:(3000+RESULT)%を 즐겨찾기에 등록했습니다】
	PRINTFORMW 즐겨찾기에 등록한 거주자와는 교류 발생이 많아지며、호감도・상성 증가에 보정이 붙습니다。
	DRAWLINE
	PRINTFORML 【이어서 이름을 변경합니다、입력하지 않으면 변경하지 않습니다。】
	DRAWLINE
	INPUTS
	IF RESULTS == ""
		;スルー
	ELSE
		SIF CFLAG:(3020+L_NPC) == 5
		CSTR:伴侶名前 = %RESULTS%
		CSTR:(3000+RESULT) = %RESULTS%
		PRINTFORML 【이름을 %CSTR:(3000+RESULT)%로 변경했습니다】
		SIF TALENT:아이같음 || TALENT:깜찍함
			CSTR:一人称 = %CALLNAME:TARGET%
	ENDIF
	GOTO INPUT_LOOP0
ENDSELECT









IF TALENT:결혼완료 == 1
	PRINTFORML [200] 남편의 이름 변경
ENDIF 
TARGET = L_T

;-------------------------------------------------
;役職変更
;-------------------------------------------------
@POSITION_CHANGE
#DIM L_INPUT
#DIM L_INPUT2
#DIM L_P

$INPUT_LOOP
CLEARLINE LINECOUNT

DRAWLINE
PRINTFORML 자금을 500000소비하여 주민의 직위를 변경할 수 있습니다。
PRINTFORML 다음 직위에서 선택하세요。
PRINTFORML 
PRINTFORML [1]  - 직위 없음
PRINTFORML [93] - 성직자
PRINTFORML [94] - 메이드
PRINTFORML [95] - 학생
PRINTFORML [96] - 아이돌
PRINTFORML [97] - 사회인
PRINTFORML [98] - 창녀
PRINTFORML [99] - 치안 유지국 직원
PRINTFORML
PRINTFORML 
PRINTFORML [999] - 돌아온다

INPUT
L_P = RESULT
L_INPUT = RESULT

SIF L_INPUT == 999
	RETURN
	
IF MONEY < 500000
	PRINTFORML 
	PRINTFORML 자금이 부족합니다。
	PRINTFORMW 
ENDIF

PRINTFORML 
PRINTFORML 직위를 변경할 주민을 선택하세요。
PRINTFORML 




CALL LIST_CHARA

L_INPUT = RESULT
SIF L_INPUT == 1000
	RETURN
IF L_INPUT != 1000
	IF TALENT:L_INPUT:NPC == 999 
		PRINTFORMW NPC는 선택할 수 없습니다
		GOTO INPUT_LOOP
	ELSEIF L_INPUT == 0
		PRINTFORMW 아나타는 선택할 수 없습니다
		GOTO INPUT_LOOP
	ENDIF
	
	IF TALENT:L_INPUT:학생 != 0 && L_P != 95
		PRINTFORML 학생의 신분을 유지합니까？
		PRINTFORML 
		PRINTFORML [1] - 네
		PRINTFORML [2] - 아니오
		INPUT
		L_INPUT2 = RESULT
		SIF L_INPUT2 >= 2
			TALENT:L_INPUT:학생 = 0
	ELSE
		TALENT:L_INPUT:학생 = 0
	ENDIF
	TALENT:L_INPUT:성직자 = 0
	TALENT:L_INPUT:메이드 = 0
	TALENT:L_INPUT:아이돌 = 0
	TALENT:L_INPUT:사회인 = 0
	TALENT:L_INPUT:창녀 = 0
	TALENT:L_INPUT:치안유지국직원 = 0


	IF L_P == 95
		PRINTFORML 학생의 신분을 선택하세요
		PRINTFORML 
		PRINTFORML [1] - 보통 학생
		PRINTFORML [2] - 대학생
		PRINTFORML [3] - 고등학생
		PRINTFORML [4] - 중학생
		PRINTFORML [5] - 초등학생
		INPUT
		L_INPUT2 = RESULT
		TALENT:L_INPUT:L_P = L_INPUT2
	ELSE
		TALENT:L_INPUT:L_P = 1
	ENDIF
	MONEY -= 500000
	PRINTFORML 
	PRINTFORML 변경했습니다。
	PRINTFORMW 
ENDIF









;-------------------------------------------------
;名前変更
;-------------------------------------------------
@JN_CONFIG_N_C
#DIM L_INPUT
#DIM L_NAME



$DATA_LIST

DRAWLINE
PRINTFORML 이름을 바꿀 거주자를 선택하세요。
DRAWLINE

CALL LIST_CHARA

L_INPUT = RESULT
L_NAME = RESULT
SIF L_INPUT == 1000
	RETURN
	; CALL JN_CONFIG
IF L_INPUT != 1000
	IF TALENT:L_INPUT:NPC == 999 
		PRINTFORMW NPC는 선택할 수 없습니다
		GOTO DATA_LIST
	ELSEIF L_INPUT == 0
		PRINTFORMW 아나타는 선택할 수 없습니다
		GOTO DATA_LIST
	ENDIF
	DRAWLINE
	PRINTL 새로운 CALLNAME을 선택하세요。
	PRINTL 입력하지 않으면、아무것도 선택하지 않고 돌아옵니다。
	DRAWLINE
	PRINTL
	INPUTS
	IF RESULTS == ""
		;スルー
	ELSE
		CALLNAME:L_NAME = %RESULTS%
		SIF TALENT:L_NAME:아이같음 || TALENT:L_NAME:깜찍함
			CSTR:L_NAME:一人称 = %CALLNAME:L_NAME%
	ENDIF
ENDIF







; CALL JN_CONFIG
